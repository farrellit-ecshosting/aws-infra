{
	"Parameters": {
		"WebAppInstanceType": {
			"Type": "String", 
			"Default": "t2.micro"
		},
		"ImageId": {
			"Type": "AWS::EC2::ImageId",
			"Description": "Use the most recent upstream AWS Linux 2 AMI"
		}
	},
	"Resources": { 
		"WebAppCluster": {
  			"Type" : "AWS::ECS::Cluster",
  			"Properties" : {
    			"ClusterName" : "GenericWebappCluster"
  			}
		},
		"WebAppSecurityGroup": {
			"Type": "AWS::EC2::SecurityGroup",
			"Properties": {
				"GroupDescription": "WebApp Security Group"
			}
		},
		"WebAppInstance": {
			"Type": "AWS::EC2::Instance",
			"Properties": {
				"DisableApiTermination": "true",
				"ImageId": { "Ref": "ImageId" },
				"InstanceInitiatedShutdownBehavior": "stop",
				"InstanceType": { "Ref": "WebAppInstanceType" },
				"SecurityGroupIds": [ 
					{ "Ref": "WebAppSecurityGroup" }
				]
			}
		}
	}
}
